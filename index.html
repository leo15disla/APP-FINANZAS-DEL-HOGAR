<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Finanzas del Hogar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- iOS Icon -->
  <link rel="apple-touch-icon" href="icon-app.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="icon-app.svg">

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#7A3EFF" />

  <!-- Tipografía -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- CSS principal -->
  <link rel="stylesheet" href="./css/styles-purple.css?v=4">
</head>

<body class="light-theme">

  <!-- Splash Screen -->
  <div id="splash-screen">
    <div class="splash-content">
      <div class="splash-icon">FH</div>
      <p class="splash-title">Finanzas</p>
      <p class="splash-sub">Finanzas del Hogar</p>
    </div>
  </div>

  <!-- Top Navigation -->
  <header class="top-nav">
    <button id="btnDashboard" class="active"><span>Dashboard</span></button>
    <button id="btnRegistrar"><span>Registrar</span></button>
    <button id="btnMovimientos"><span>Movimientos</span></button>
    <button id="btnCuentas"><span>Cuentas</span></button>
    <button id="btnPrestamos"><span>Préstamos</span></button>
    <button id="btnCalendario"><span>Calendario</span></button>
    <button id="btnPresupuesto"><span>Presupuesto</span></button>
    <button id="btnExportar"><span>Exportar</span></button>
    <button id="btnAjustes"><span>Ajustes</span></button>
  </header>

  <main>

    <!-- Dashboard -->
    <section id="seccion-dashboard">
      <div class="card">
        <h3>Resumen del mes</h3>
        <div class="month-row">
          <div id="dashboard-mes" class="month-badge"></div>
          <button id="btn-resumen-anterior" class="btn-link-small">
            Ver mes anterior
          </button>
        </div>

        <div class="kpi-panel">
          <div class="kpi-grid">
            <div class="kpi-box">
              <div class="kpi-label">Ingresos</div>
              <div class="kpi-value" id="kpi-ingresos">RD$ 0</div>
              <div class="kpi-extra" id="kpi-ingresos-variacion"></div>
            </div>

            <div class="kpi-box">
              <div class="kpi-label">Gastos</div>
              <div class="kpi-value" id="kpi-gastos">RD$ 0</div>
              <div class="kpi-extra" id="kpi-gastos-variacion"></div>
            </div>
          </div>

          <div class="kpi-box">
            <div class="kpi-label">Balance</div>
            <div class="kpi-value" id="kpi-balance">RD$ 0</div>
            <div class="kpi-extra" id="kpi-balance-tendencia"></div>
          </div>
        </div>
      </div>

      <!-- Gráficas -->
      <div class="charts-grid">
        <div class="chart-container">
          <h4>Distribución 50/30/20</h4>
          <canvas id="chart-503020"></canvas>
        </div>

        <div class="chart-container">
          <h4>Ingresos vs Gastos</h4>
          <canvas id="chart-ing-gastos"></canvas>
        </div>
      </div>
    </section>

    <!-- Registrar -->
    <section id="seccion-registrar" class="hidden">
      <div class="card">
        <h3>Registrar movimiento</h3>

        <form id="form-mov">
          <label>Tipo</label>
          <select id="tipo">
            <option value="Ingreso">Ingreso</option>
            <option value="Gasto">Gasto</option>
            <option value="Transferencia">Transferencia</option>
          </select>

          <label>Fecha</label>
          <input type="date" id="fecha">

          <label>Monto</label>
          <input type="text" id="monto">

          <label>Categoría</label>
          <select id="filtro-categoria"></select>

          <label>Cuenta</label>
          <select id="mov-cuenta"></select>

          <label>50/30/20</label>
          <select id="tipo503020">
            <option value="Necesidad">Necesidad</option>
            <option value="Deseo">Deseo</option>
            <option value="Ahorro">Ahorro</option>
          </select>

          <label>Nota</label>
          <textarea id="nota"></textarea>

          <button class="btn-primary" type="submit">Guardar</button>
        </form>
      </div>
    </section>

    <!-- Movimientos -->
    <section id="seccion-movimientos" class="hidden">
      <div class="card">
        <h3>Movimientos del mes</h3>

        <input id="buscar" placeholder="Buscar...">

        <table>
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Tipo</th>
              <th>Monto</th>
              <th>Categoría</th>
              <th>Cuenta</th>
              <th>50/30/20</th>
              <th>Nota</th>
              <th>Editar</th>
              <th>Eliminar</th>
            </tr>
          </thead>
          <tbody id="tabla-actual"></tbody>
        </table>
      </div>
    </section> 
        <!-- Cuentas -->
    <section id="seccion-cuentas" class="hidden">
      <div class="card">
        <h3>Cuentas y tarjetas</h3>
        <p class="section-subtitle">Visualiza y administra tus cuentas bancarias.</p>
        <div id="lista-cuentas" class="cuentas-stack"></div>
      </div>

      <div class="card">
        <h3>Agregar / editar cuenta</h3>

        <form id="form-cuenta">
          <input type="hidden" id="cuenta-id">

          <label>Nombre de la cuenta</label>
          <input type="text" id="cuenta-nombre" required>

          <label>Tipo</label>
          <select id="cuenta-tipo">
            <option value="Cuenta de ahorro">Cuenta de ahorro</option>
            <option value="Cuenta corriente">Cuenta corriente</option>
            <option value="Tarjeta de crédito">Tarjeta de crédito</option>
            <option value="Efectivo">Efectivo</option>
            <option value="Otra">Otra</option>
          </select>

          <label>Últimos 4 dígitos</label>
          <input type="text" id="cuenta-numero" maxlength="4">

          <label>Límite</label>
          <input type="number" id="cuenta-limite">

          <label>Pago mínimo (%)</label>
          <input type="number" id="cuenta-minimo" step="0.1">

          <label>Interés mensual (%)</label>
          <input type="number" id="cuenta-interes" step="0.1">

          <label>Nota</label>
          <textarea id="cuenta-nota"></textarea>

          <button class="btn-primary">Guardar cuenta</button>
        </form>
      </div>
    </section>

    <!-- Préstamos -->
    <section id="seccion-prestamos" class="hidden">
      <div class="card">
        <h3>Gestor de préstamos</h3>

        <form id="form-prestamo">
          <label>Nombre del préstamo</label>
          <input type="text" id="prestamo-nombre" required>

          <label>Monto</label>
          <input type="number" id="prestamo-monto" required>

          <label>Tasa anual (%)</label>
          <input type="number" id="prestamo-tasa" step="0.01" required>

          <label>Plazo (meses)</label>
          <input type="number" id="prestamo-plazo" required>

          <label>Nota (opcional)</label>
          <textarea id="prestamo-nota"></textarea>

          <button class="btn-primary" type="submit">Calcular y guardar</button>
        </form>
      </div>

      <div class="card">
        <h3>Préstamos activos</h3>
        <div class="overflow-x-auto">
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Monto</th>
                <th>Cuota</th>
                <th>Plazo</th>
                <th>Detalle</th>
                <th>Eliminar</th>
              </tr>
            </thead>
            <tbody id="tabla-prestamos"></tbody>
          </table>
        </div>
      </div>

      <div class="card hidden-block" id="card-detalle-prestamo">
        <h3 id="detalle-prestamo-titulo"></h3>
        <p id="detalle-prestamo-subtitulo"></p>
        <div id="detalle-prestamo-resumen"></div>

        <div style="max-height:300px; overflow:auto;">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Fecha</th>
                <th>Cuota</th>
                <th>Capital</th>
                <th>Interés</th>
                <th>Saldo</th>
              </tr>
            </thead>
            <tbody id="tabla-detalle-prestamo"></tbody>
          </table>
        </div>

        <div class="chart-container">
          <canvas id="chart-prestamo"></canvas>
        </div>
      </div>
    </section>

    <!-- Calendario -->
    <section id="seccion-calendario" class="hidden">
      <div class="card">
        <h3>Calendario de pagos</h3>

        <div class="cal-tabs">
          <button class="cal-tab-btn active" data-calvista="mes">Calendario</button>
          <button class="cal-tab-btn" data-calvista="agenda">Agenda</button>
        </div>

        <!-- Vista calendario -->
        <div id="vista-cal-mes" class="cal-tab-content active">
          <div class="row align-center mb-8">
            <button class="btn-small" id="cal-prev-mes">&lt;</button>
            <div id="calendario-mes-actual" class="calendar-month"></div>
            <button class="btn-small" id="cal-next-mes">&gt;</button>
          </div>

          <div class="cal-grid-header">
            <div>Lun</div><div>Mar</div><div>Mié</div>
            <div>Jue</div><div>Vie</div><div>Sáb</div><div>Dom</div>
          </div>

          <div id="cal-grid-mes" class="cal-grid-dias"></div>

          <div id="cal-detalle-dia" class="cal-detalle-dia">
            <span class="text-muted">Selecciona un día...</span>
          </div>
        </div>

        <!-- Vista agenda -->
        <div id="vista-cal-agenda" class="cal-tab-content">
          <div id="cal-agenda-lista"></div>
        </div>
      </div>
    </section>

    <!-- Presupuesto -->
    <section id="seccion-presupuesto" class="hidden">
      <div class="card">
        <h3>Presupuesto mensual</h3>
        <form id="form-presupuesto">
          <label>Necesidades (50%)</label>
          <input type="number" id="presupuesto-necesidad">

          <label>Deseos (30%)</label>
          <input type="number" id="presupuesto-deseo">

          <label>Ahorro (20%)</label>
          <input type="number" id="presupuesto-ahorro">

          <button class="btn-primary">Guardar presupuesto</button>
        </form>
      </div>

      <div class="card">
        <h3>Categorías personalizadas</h3>

        <form id="form-presupuesto-personalizado">
          <label>Nombre</label>
          <input type="text" id="categoria-nombre" required>

          <label>Tipo</label>
          <select id="categoria-tipo">
            <option value="Fija">Fija</option>
            <option value="Variable">Variable</option>
          </select>

          <label>Límite</label>
          <input type="number" id="categoria-limite">

          <label>Icono</label>
          <select id="categoria-icono"></select>

          <label>Color</label>
          <input type="color" id="categoria-color" value="#7A3EFF">

          <label class="checkbox-inline">
            <input type="checkbox" id="categoria-recurrente"> Recurrente
          </label>

          <button class="btn-primary">Crear categoría</button>
        </form>

        <div id="lista-presupuesto-personalizado"></div>
      </div>
    </section>

    <!-- Exportar -->
    <section id="seccion-exportar" class="hidden">
      <div class="card">
        <h3>Exportar datos</h3>
        <button class="btn-primary" id="btn-exportar">CSV del mes</button>
        <button class="btn-primary" id="btn-exportar-json">JSON del mes</button>
        <button class="btn-primary" id="btn-exportar-pdf-mes">PDF del mes</button>
        <button class="btn-primary" id="btn-exportar-xlsx">Excel del mes</button>

        <div class="share-row">
          <button class="btn-secondary" id="btn-share-whatsapp" disabled>Compartir</button>
          <p id="share-hint">Genera un archivo para habilitar la opción.</p>
        </div>
      </div>
    </section>

    <!-- Ajustes -->
    <section id="seccion-ajustes" class="hidden">
      <div class="card">
        <h3>Ajustes y Backup</h3>
        <button class="btn-primary" id="btn-backup-export">Exportar backup</button>

        <label class="btn-secondary file-label">
          Importar backup
          <input type="file" id="input-backup" accept="application/json">
        </label>
      </div>
    </section>

  </main>

  <!-- Modal Editar -->
  <div id="modal-editar" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close" data-modal-close>&times;</button>
      <h3>Editar movimiento</h3>
      <form id="form-editar-mov">
        <input type="hidden" id="edit-id">

        <label>Fecha</label>
        <input type="date" id="edit-fecha">

        <label>Monto</label>
        <input type="text" id="edit-monto">

        <label>Categoría</label>
        <select id="edit-categoria"></select>

        <label>Nota</label>
        <input type="text" id="edit-nota">

        <button class="btn-primary">Guardar cambios</button>
      </form>
    </div>
  </div>

  <!-- JS principal -->
  <script type="module" src="js/main.js"></script>
</body>
</html>

