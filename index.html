<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Finanzas del Hogar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ICONO iOS -->
  <link rel="apple-touch-icon" href="icon-app.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="icon-app.svg">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#7A4DFF" />

  <!-- Tipograf√≠a premium -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tipograf√≠a premium -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="css/style.css">
</head>

<body class="light-theme">

<svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden;">
  <symbol id="icon-dashboard" viewBox="0 0 24 24">
    <path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1v-10.5z" fill="currentColor" />
  </symbol>
  <symbol id="icon-registrar" viewBox="0 0 24 24">
    <path d="M12 4v16M4 12h16" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" />
  </symbol>
  <symbol id="icon-lista" viewBox="0 0 24 24">
    <path d="M5 7h14M5 12h14M5 17h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
  </symbol>
  <symbol id="icon-cuenta" viewBox="0 0 24 24">
    <path d="M3 7h18v10H3V7z" fill="none" stroke="currentColor" stroke-width="2"/><path d="M7 11h4M7 13h2" stroke="currentColor" stroke-width="2" stroke-linecap="round" /></symbol>
  <symbol id="icon-prestamo" viewBox="0 0 24 24">
    <path d="M5 8a7 7 0 1 1 0 8" stroke="currentColor" stroke-width="2" fill="none"/><path d="M9 12h6M12 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></symbol>
  <symbol id="icon-calendario" viewBox="0 0 24 24">
    <rect x="4" y="6" width="16" height="14" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
    <path d="M4 10h16M9 3v4M15 3v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </symbol>
  <symbol id="icon-presupuesto" viewBox="0 0 24 24">
    <path d="M12 4a8 8 0 1 0 8 8" stroke="currentColor" stroke-width="2" fill="none" />
    <path d="M12 4v8l5 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
  </symbol>
  <symbol id="icon-exportar" viewBox="0 0 24 24">
    <path d="M12 4v12m0-12 4 4m-4-4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <path d="M5 18h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
  </symbol>
  <symbol id="icon-ajustes" viewBox="0 0 24 24">
    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" stroke="currentColor" stroke-width="2" fill="none" />
    <path d="M4.7 9.5 4 8l2-3 1.5.5M19.3 9.5 20 8l-2-3-1.5.5M4.7 14.5 4 16l2 3 1.5-.5M19.3 14.5 20 16l-2 3-1.5-.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none" />
  </symbol>
</svg>

<div id="splash-screen">
  <div class="splash-content">
    <div class="splash-icon">FH</div>
    <p class="splash-title">Finanzas</p>
    <p class="splash-sub">Finanzas del Hogar</p>
  </div>
</div>

<div id="onboarding-overlay" class="hidden">
  <div class="onboarding-card">
    <button class="onboarding-close" aria-label="Cerrar onboarding" id="onboarding-close">√ó</button>
    <div class="onboarding-illustration">üíú</div>
    <div class="onboarding-title" id="onboarding-title">Organiza tus gastos e ingresos f√°cilmente</div>
    <div class="onboarding-text" id="onboarding-text">Control completo desde un panel sencillo.</div>
    <div class="onboarding-dots">
      <span class="active"></span><span></span><span></span>
    </div>
    <div class="onboarding-actions">
      <button type="button" class="btn-secondary pill-btn" id="onboarding-skip">Omitir</button>
      <button type="button" class="btn-primary pill-btn" id="onboarding-next">Continuar</button>
    </div>
  </div>
</div>

<header>
  <button id="btnDashboard" class="active">
    <svg class="nav-icon"><use href="#icon-dashboard"></use></svg>
    <span class="nav-label">Dashboard</span>
  </button>

  <button id="btnRegistrar">Registrar</button>
  <button id="btnMovimientos">Movimientos</button>
  <button id="btnCuentas">Cuentas</button>
  <button id="btnPrestamos">Pr√©stamos</button>
  <button id="btnCalendario">Calendario</button>
  <button id="btnPresupuesto">Presupuesto</button>
  <button id="btnExportar">Exportar</button>
  <button id="btnAjustes">Ajustes</button>
</header>

<main>

  <div id="onboarding-banner" class="card onboarding hidden">
    <div>
      <div class="section-title">Bienvenido a Finanzas del Hogar</div>
      <p class="section-subtitle">Configura tu primer mes o prueba con datos de ejemplo.</p>
    </div>
    <div class="row" style="gap:8px; flex-wrap:wrap;">
      <button type="button" class="btn-primary" id="btn-onboarding-demo">Probar con datos de ejemplo</button>
      <button type="button" class="btn-secondary" id="btn-onboarding-start">Empezar en blanco</button>
    </div>
  </div>

  <!-- DASHBOARD -->
  <section id="seccion-dashboard">
    <div class="card">
      <h3>Resumen del mes</h3>

      <div class="month-row">
        <div id="dashboard-mes" class="month-badge calendar-style"></div>
        <button type="button" id="btn-resumen-anterior" class="btn-link-small">
          Ver resumen del mes anterior
        </button>
      </div>
      <div class="hero-actions">
        <p class="hero-actions-title">Atajos r√°pidos</p>
        <div class="hero-actions-row">
          <button type="button" class="pill-action" onclick="document.getElementById('btnRegistrar').click()">+ Ingreso</button>
          <button type="button" class="pill-action" onclick="document.getElementById('btnRegistrar').click()">+ Gasto</button>
          <button type="button" class="pill-action" onclick="document.getElementById('btnRegistrar').click()">+ Transferencia</button>
        </div>
        <p class="hero-note">Lleva tu flujo al d√≠a y vuelve al dashboard cuando quieras.</p>
      </div>
    </div>

    <div class="card kpi-panel">
      <div class="kpi-grid">
        <div class="kpi-box kpi-ingresos">
          <div class="kpi-icon">üí∞</div>
          <div class="kpi-label">Ingresos</div>
          <div class="kpi-value" id="kpi-ingresos">RD$ 0</div>
          <div class="kpi-extra" id="kpi-ingresos-variacion">Sin datos del mes anterior</div>
        </div>

        <div class="kpi-box kpi-gastos">
          <div class="kpi-icon">üí∏</div>
          <div class="kpi-label">Gastos</div>
          <div class="kpi-value" id="kpi-gastos">RD$ 0</div>
          <span class="kpi-tag" id="kpi-gastos-alerta">Dinero que sale</span>
          <div class="kpi-extra" id="kpi-gastos-variacion">Sin datos del mes anterior</div>
        </div>

        <div class="kpi-box">
        <div class="kpi-label">Balance</div>
        <div class="kpi-value" id="kpi-balance">RD$ 0</div>
        <div class="kpi-extra" id="kpi-balance-tendencia">
          Sin datos suficientes para comparar la semana.
        </div>
        </div>
      </div>

      <div class="kpi-carousel">
        <div class="dashboard-grid">
          <div class="kpi-box">
            <div class="kpi-icon">üí∞</div>
            <div class="kpi-label">Ingresos</div>
            <div class="kpi-value" id="kpi-ingresos">RD$ 0</div>
            <div class="kpi-extra" id="kpi-ingresos-variacion">Sin datos del mes anterior</div>
          </div>

        <div class="kpi-box kpi-prestamos">
          <div class="kpi-icon">üìà</div>
          <div class="kpi-label">Pr√©stamos activos</div>
          <div class="kpi-value" id="kpi-prestamos">RD$ 0</div>
          <span class="kpi-tag">Capital en pr√©stamos</span>
        </div>
      </div>
    </div>

    <div class="card kpi-duo-card">
      <div class="duo-item">
        <div class="duo-label">Total en cuentas bancarias</div>
        <div class="duo-value" id="kpi-total-cuentas">RD$ 0</div>
        <div class="duo-hint">Saldo combinado de todas las cuentas.</div>
      </div>
      <div class="duo-item">
        <div class="duo-label">Liquidez disponible</div>
        <div class="duo-value" id="kpi-liquidez">RD$ 0</div>
        <div class="duo-hint">Cuentas bancarias menos deudas del mes.</div>
      </div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="card deuda-widget">
      <div class="section-title">Total de deudas del mes</div>
      <div class="deuda-value" id="kpi-deuda-mes">RD$ 0</div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="card deuda-widget">
      <div class="section-title">Total de deudas del mes</div>
      <div class="deuda-value" id="kpi-deuda-mes">RD$ 0</div>
      <div class="progress">
        <div id="deuda-progress" class="progress-bar" style="width:0%"></div>
      </div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="card deuda-widget">
      <div class="section-title">Total de deudas del mes</div>
      <div class="deuda-value" id="kpi-deuda-mes">RD$ 0</div>
      <div class="progress">
        <div id="deuda-progress" class="progress-bar" style="width:0%"></div>
      </div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="card deuda-widget">
      <div class="section-title">Total de deudas del mes</div>
      <div class="deuda-value" id="kpi-deuda-mes">RD$ 0</div>
      <div class="progress">
        <div id="deuda-progress" class="progress-bar" style="width:0%"></div>
      </div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="card deuda-widget">
      <div class="section-title">Total de deudas del mes</div>
      <div class="deuda-value" id="kpi-deuda-mes">RD$ 0</div>
      <div class="progress">
        <div id="deuda-progress" class="progress-bar" style="width:0%"></div>
      </div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="card deuda-widget">
      <div class="section-title">Total de deudas del mes</div>
      <div class="deuda-value" id="kpi-deuda-mes">RD$ 0</div>
      <div class="progress">
        <div id="deuda-progress" class="progress-bar" style="width:0%"></div>
      </div>
      <p class="section-subtitle" id="kpi-deuda-texto">Tienes RD$ 0 que pagar este mes.</p>
    </div>

    <div class="charts-grid">
      <div class="chart-container">
        <h4>Distribuci√≥n 50 / 30 / 20</h4>
        <canvas id="chart-503020"></canvas>
        <p id="texto-503020" class="chart-footnote"></p>
        <p id="limite-503020" class="chart-footnote"></p>
      </div>

      <div class="chart-container">
        <div class="chart-header">
          <h4>Ingresos vs Gastos</h4>
          <div class="chart-toggle">
            <button class="chart-toggle-btn active" data-modo="mes">Mes</button>
            <button class="chart-toggle-btn" data-modo="semana">Semana</button>
          </div>
          <canvas id="chart-ing-gastos"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- REGISTRAR -->
  <section id="seccion-registrar" class="hidden">
    <div class="card form-shell">
      <div class="section-title" data-role="titulo-form">Registrar movimiento</div>
      <p class="section-subtitle">Agrega ingresos o gastos del hogar.</p>

      <form id="form-mov" data-form="movimiento">
        <div class="row form-row">
          <div>
            <label for="tipo">Tipo</label>
            <select id="tipo">
              <option value="Ingreso">Ingreso</option>
              <option value="Gasto">Gasto</option>
            </select>
          </div>

          <div class="calendar-field">
            <label for="fecha">Fecha</label>
            <div class="calendar-control">
              <input type="text" id="fecha" readonly placeholder="Selecciona una fecha" />
              <div id="calendario-visual" class="calendar-picker hidden">
                <div class="calendar-header">
                  <button type="button" id="cal-prev">‚Äπ</button>
                  <div id="cal-mes"></div>
                  <button type="button" id="cal-next">‚Ä∫</button>
                </div>
                <div class="calendar-weekdays">
                  <span>Lu</span><span>Ma</span><span>Mi</span><span>Ju</span><span>Vi</span><span>S√°</span><span>Do</span>
                </div>
                <div id="cal-grid" class="calendar-grid"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <label for="monto">Monto</label>
          <input type="text" id="monto" placeholder="Ej: RD$ 30,000" data-prefijo="RD$ ">
        </div>

        <div class="form-row">
          <label for="categoria">Categor√≠a</label>
          <select id="categoria"></select>
        </div>

        <div class="quick-actions" id="acciones-rapidas">
          <span class="quick-label">R√°pido:</span>
          <button type="button" data-accion="Comida" data-icon="üí∏">üí∏ Comida</button>
          <button type="button" data-accion="Transporte" data-icon="üöó">üöó Transporte</button>
          <button type="button" data-accion="Supermercado" data-icon="üõí">üõí Supermercado</button>
        </div>

        <!-- NUEVO: seleccionar cuenta asociada -->
        <div class="form-row">
          <label for="mov-cuenta">Cuenta asociada</label>
          <select id="mov-cuenta"></select>
        </div>

        <div class="form-row">
          <label for="tipo503020">50 / 30 / 20</label>
          <select id="tipo503020">
            <option value="Necesidad">Necesidad (50%)</option>
            <option value="Deseo">Deseo (30%)</option>
            <option value="Ahorro">Ahorro (20%)</option>
          </select>
        </div>

        <div class="form-row">
          <label for="nota">Nota (opcional)</label>
          <textarea id="nota" placeholder="Ej: Supermercado, luz, salida, etc." list="sugerencias-nota"></textarea>
          <datalist id="sugerencias-nota"></datalist>
        </div>

        <div class="form-row">
          <button type="submit" class="btn-primary" id="btn-guardar">
            Guardar movimiento
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- MOVIMIENTOS + HISTORIAL -->
  <section id="seccion-movimientos" class="hidden">
    <div class="card section-card">
      <div class="section-title">Movimientos</div>
      <p class="section-subtitle">Revisa los movimientos del mes o consulta el historial mensual.</p>

      <div class="subtabs">
        <button class="subtab-btn active" data-subtab="actual">Del mes actual</button>
        <button class="subtab-btn" data-subtab="historial">Historial mensual</button>
      </div>

      <!-- SUBTAB: MOVIMIENTOS ACTUALES -->
      <div id="subtab-actual" class="subtab-content active">
        <div class="row">
          <div>
            <label>Buscar</label>
            <input type="text" id="buscar" placeholder="Filtrar por categor√≠a, nota, monto...">
          </div>

          <div class="view-toggle">
            <button type="button" class="view-btn active" data-view="lista">Lista</button>
            <button type="button" class="view-btn" data-view="tarjetas">Tarjetas</button>
          </div>
        </div>

        <div class="chip-row" id="chips-tipo">
          <span class="chip-label">Tipo:</span>
          <button class="chip active" data-chip="tipo" data-value="Todos">Todos</button>
          <button class="chip" data-chip="tipo" data-value="Ingreso">Ingresos</button>
          <button class="chip" data-chip="tipo" data-value="Gasto">Gastos</button>
          <button class="chip" data-chip="tipo" data-value="Transferencia">Transferencias</button>
        </div>

        <div class="chip-row" id="chips-tiempo">
          <span class="chip-label">Rango:</span>
          <button class="chip active" data-chip="tiempo" data-value="mes">Mes</button>
          <button class="chip" data-chip="tiempo" data-value="semana">Semana</button>
          <button class="chip" data-chip="tiempo" data-value="hoy">Hoy</button>
        </div>

        <div class="chip-row" id="chips-tipo">
          <span class="chip-label">Tipo:</span>
          <button class="chip active" data-chip="tipo" data-value="Todos">Todos</button>
          <button class="chip" data-chip="tipo" data-value="Ingreso">Ingresos</button>
          <button class="chip" data-chip="tipo" data-value="Gasto">Gastos</button>
          <button class="chip" data-chip="tipo" data-value="Transferencia">Transferencias</button>
        </div>

        <div class="chip-row" id="chips-tiempo">
          <span class="chip-label">Rango:</span>
          <button class="chip active" data-chip="tiempo" data-value="mes">Mes</button>
          <button class="chip" data-chip="tiempo" data-value="semana">Semana</button>
          <button class="chip" data-chip="tiempo" data-value="hoy">Hoy</button>
        </div>

        <div class="row">
          <div>
            <label>50 / 30 / 20</label>
            <select id="filtro503020">
              <option value="Todos">Todos</option>
              <option value="Necesidad">Necesidad</option>
              <option value="Deseo">Deseo</option>
              <option value="Ahorro">Ahorro</option>
            </select>
          </div>

          <div>
            <label>Categor√≠a</label>
            <select id="filtro-categoria"></select>
          </div>
        </div>

        <!-- Resumen de movimientos filtrados -->
        <p id="resumen-mov" class="section-subtitle" style="margin-top:4px;"></p>

        <div id="tabla-wrap" style="margin-top:10px; overflow-x:auto;">
          <table>
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Tipo</th>
                <th>Monto</th>
                <th>Categor√≠a</th>
                <th>Cuenta</th>
                <th>50/30/20</th>
                <th>Nota</th>
                <th>Editar</th>
                <th>Eliminar</th>
              </tr>
            </thead>
            <tbody id="tabla-actual"></tbody>
          </table>
        </div>

        <div id="tarjetas-actual" class="mov-cards hidden"></div>
        <div id="mov-empty" class="mov-empty-state hidden">
          <div class="mov-empty-icon">üóíÔ∏è</div>
          <div class="mov-empty-text">A√∫n no tienes movimientos registrados.</div>
          <button type="button" id="btn-empty-registrar" class="btn-primary">Registrar movimiento</button>
        </div>
      </div>

      <!-- SUBTAB: HISTORIAL -->
      <div id="subtab-historial" class="subtab-content">
        <div class="row">
          <div>
            <label>Mes</label>
            <select id="historial-meses"></select>
          </div>
        </div>

        <div style="margin-top:10px; overflow-x:auto;">
          <table>
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Tipo</th>
                <th>Monto</th>
                <th>Categor√≠a</th>
                <th>50/30/20</th>
                <th>Nota</th>
              </tr>
            </thead>
            <tbody id="tabla-historial"></tbody>
          </table>
        </div>

        <div class="hist-resumen">
          <div class="hist-item">
            <div class="hist-label">Mes m√°s caro</div>
            <div class="hist-value" id="hist-mes-caro">‚Äî</div>
          </div>
          <div class="hist-item">
            <div class="hist-label">Mes m√°s barato</div>
            <div class="hist-value" id="hist-mes-barato">‚Äî</div>
          </div>
          <div class="hist-item">
            <div class="hist-label">Gasto promedio</div>
            <div class="hist-value" id="hist-mes-promedio">‚Äî</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div id="modal-editar" class="modal hidden">
    <div class="modal-content">
      <button type="button" class="modal-close" data-modal-close>&times;</button>
      <h3>Editar movimiento</h3>
      <form id="form-editar-mov">
        <input type="hidden" id="edit-id">
        <div class="row form-row">
          <div>
            <label for="edit-fecha">Fecha</label>
            <input type="date" id="edit-fecha">
          </div>
          <div>
            <label for="edit-monto">Monto</label>
            <input type="text" id="edit-monto" placeholder="RD$ 0">
          </div>
        </div>
        <div class="form-row">
          <label for="edit-categoria">Categor√≠a</label>
          <select id="edit-categoria"></select>
        </div>
        <div class="form-row">
          <label for="edit-nota">Nota</label>
          <input type="text" id="edit-nota" placeholder="Detalle opcional">
        </div>
        <div class="form-row">
          <button type="submit" class="btn-primary">Guardar cambios</button>
        </div>
      </form>
    </div>
  </div>

  <!-- CUENTAS & TARJETAS -->
  <section id="seccion-cuentas" class="hidden">
    <div class="card">
      <div class="section-title">Cuentas y tarjetas</div>
      <p class="section-subtitle">
        Visualiza tus cuentas bancarias y tarjetas al estilo Apple Wallet.
      </p>

      <div id="lista-cuentas" class="cuentas-stack"></div>
    </div>

    <div class="card">
      <div class="section-title">Agregar / editar cuenta</div>
      <p class="section-subtitle">Registra cuentas bancarias, tarjetas o efectivo.</p>

      <form id="form-cuenta">
        <input type="hidden" id="cuenta-id">

        <label for="cuenta-nombre">Nombre de la cuenta</label>
        <input type="text" id="cuenta-nombre" placeholder="Ej: Banco Popular n√≥mina" required>

        <div class="row">
          <div>
            <label for="cuenta-tipo">Tipo</label>
            <select id="cuenta-tipo">
              <option value="Cuenta de ahorro">Cuenta de ahorro</option>
              <option value="Cuenta corriente">Cuenta corriente</option>
              <option value="Tarjeta de cr√©dito">Tarjeta de cr√©dito</option>
              <option value="Efectivo">Efectivo</option>
              <option value="Otra">Otra</option>
            </select>
          </div>
          <div>
            <label for="cuenta-numero">√öltimos 4 d√≠gitos</label>
            <input type="text" id="cuenta-numero" maxlength="4" placeholder="Ej: 1234">
          </div>
        </div>

        <div class="row">
          <div>
            <label for="cuenta-saldo">Saldo actual</label>
            <input type="number" id="cuenta-saldo" placeholder="Ej: 25000">
          </div>
          <div>
            <label for="cuenta-color">Color de tarjeta</label>
            <input type="color" id="cuenta-color" value="#0f172a">
            <div id="cuenta-color-preview" class="cuenta-color-preview"></div>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="cuenta-limite">L√≠mite (tarjeta)</label>
            <input type="number" id="cuenta-limite" placeholder="Ej: 50000">
          </div>
          <div>
            <label for="cuenta-minimo">Pago m√≠nimo (%)</label>
            <input type="number" id="cuenta-minimo" placeholder="Ej: 5" step="0.1">
          </div>
        </div>

        <div class="row">
          <div>
            <label for="cuenta-interes">Inter√©s mensual estimado (%)</label>
            <input type="number" id="cuenta-interes" placeholder="Ej: 2.5" step="0.01">
          </div>
        </div>

        <div class="row">
          <div>
            <label for="cuenta-dia-corte">D√≠a de corte (tarjeta)</label>
            <input type="number" id="cuenta-dia-corte" min="1" max="31" placeholder="Ej: 15">
          </div>
          <div>
            <label for="cuenta-dia-pago">D√≠a de pago (tarjeta)</label>
            <input type="number" id="cuenta-dia-pago" min="1" max="31" placeholder="Ej: 25">
          </div>
        </div>

        <label for="cuenta-nota">Nota (opcional)</label>
        <textarea id="cuenta-nota" placeholder="Ej: Cuenta principal de sueldo, uso diario, etc."></textarea>

        <button type="submit" class="btn-primary">Guardar cuenta</button>
      </form>
    </div>

    <div class="card" id="card-detalle-cuenta" style="display:none;">
      <div class="section-title" id="detalle-cuenta-titulo">Detalle de la cuenta</div>
      <p class="section-subtitle" id="detalle-cuenta-subtitulo"></p>
      <p id="detalle-cuenta-nota"></p>
    </div>
  </section>

  <!-- PR√âSTAMOS -->
  <section id="seccion-prestamos" class="hidden">
    <div class="card">
      <div class="section-title">Registrar pr√©stamo</div>
      <p class="section-subtitle">
        Crea pr√©stamos con diferentes tipos de amortizaci√≥n (francesa, inter√©s compuesto diario, americana).
      </p>

      <form id="form-prestamo">
        <label for="prestamo-nombre">Nombre del pr√©stamo</label>
        <input type="text" id="prestamo-nombre" placeholder="Ej: Pr√©stamo carro, Banco X" required>

        <div class="row">
          <div>
            <label for="prestamo-tipo">Tipo de amortizaci√≥n</label>
            <select id="prestamo-tipo">
              <option value="francesa">Francesa (cuota fija)</option>
              <option value="compuesto-diario">Inter√©s compuesto diario</option>
              <option value="americana">Americana (solo inter√©s + capital al final)</option>
            </select>
          </div>
          <div>
            <label for="prestamo-monto">Monto</label>
            <input type="number" id="prestamo-monto" placeholder="Ej: 150000" required>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="prestamo-tasa">Tasa anual (%)</label>
            <input type="number" id="prestamo-tasa" placeholder="Ej: 24" step="0.01" required>
          </div>
          <div>
            <label for="prestamo-plazo">Plazo (meses)</label>
            <input type="number" id="prestamo-plazo" placeholder="Ej: 12" required>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="prestamo-fecha-inicio">Fecha de inicio</label>
            <input type="date" id="prestamo-fecha-inicio">
          </div>
          <div>
            <label for="prestamo-fecha-primer-pago">Fecha primer pago</label>
            <input type="date" id="prestamo-fecha-primer-pago">
          </div>
        </div>

        <label for="prestamo-nota">Nota (opcional)</label>
        <textarea id="prestamo-nota" placeholder="Ej: Pr√©stamo personal, cliente, banco, etc."></textarea>

        <button type="submit" class="btn-primary">Calcular y guardar pr√©stamo</button>
      </form>
    </div>

    <div class="card">
      <div class="section-title">Pr√©stamos activos</div>
      <p class="section-subtitle">Lista de pr√©stamos guardados con su resumen principal.</p>

      <div style="overflow-x:auto;">
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Tipo</th>
              <th>Monto</th>
              <th>Cuota aprox.</th>
              <th>Plazo</th>
              <th>Detalle</th>
              <th>Eliminar</th>
            </tr>
          </thead>
          <tbody id="tabla-prestamos"></tbody>
        </table>
      </div>
    </div>

    <div class="card" id="card-detalle-prestamo" style="display:none;">
      <div class="section-title" id="detalle-prestamo-titulo">Detalle del pr√©stamo</div>
      <p class="section-subtitle" id="detalle-prestamo-subtitulo"></p>

      <div class="resumen-prestamo" id="detalle-prestamo-resumen"></div>

      <div style="max-height:300px; overflow:auto; margin-top:10px;">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Fecha</th>
              <th>Cuota</th>
              <th>Capital</th>
              <th>Inter√©s</th>
              <th>Saldo</th>
            </tr>
          </thead>
          <tbody id="tabla-detalle-prestamo"></tbody>
        </table>
      </div>

      <div class="chart-container" style="margin-top:12px;">
        <canvas id="chart-prestamo" height="180"></canvas>
      </div>
    </div>
  </section>

  <!-- CALENDARIO -->
  <section id="seccion-calendario" class="hidden">
    <div class="card">
      <div class="section-title">Calendario de pagos</div>
      <p class="section-subtitle">
        Visualiza cuotas de pr√©stamos y fechas clave de tarjetas en un calendario mensual o vista de agenda.
      </p>

      <div class="cal-tabs">
        <button class="cal-tab-btn active" data-calvista="mes">Calendario</button>
        <button class="cal-tab-btn" data-calvista="agenda">Agenda</button>
      </div>

      <!-- Vista Calendario -->
      <div id="vista-cal-mes" class="cal-tab-content active">
        <div class="row" style="align-items:center; margin-bottom:8px;">
          <div class="cal-nav-btns">
            <button class="btn-small" id="cal-prev">&lt;</button>
            <button class="btn-small" id="cal-next">&gt;</button>
          </div>
          <div style="font-size:14px;font-weight:600;" id="calendario-mes-actual"></div>
        </div>

        <div class="cal-grid-header">
          <div>Lun</div>
          <div>Mar</div>
          <div>Mi√©</div>
          <div>Jue</div>
          <div>Vie</div>
          <div>S√°b</div>
          <div>Dom</div>
        </div>
        <div id="cal-grid" class="cal-grid-dias"></div>

        <div id="cal-detalle-dia" style="margin-top:10px; font-size:12px;">
          <span style="color:#6b7280;">Toca un d√≠a del calendario para ver sus pagos.</span>
        </div>
      </div>

      <!-- Vista Agenda -->
      <div id="vista-cal-agenda" class="cal-tab-content">
        <div id="cal-agenda-lista"></div>
      </div>
    </div>
  </section>

  <!-- PRESUPUESTO -->
  <section id="seccion-presupuesto" class="hidden">
    <div class="card">
      <div class="section-title">Presupuesto mensual</div>
      <p class="section-subtitle">Define cu√°nto quieres destinar a cada parte del 50 / 30 / 20.</p>
      <form id="form-presupuesto">
        <div class="row">
          <div>
            <label>Necesidades (50%)</label>
            <input type="number" id="presupuesto-necesidad" name="presupuesto-necesidad" placeholder="Ej: 20000">
          </div>
          <div>
            <label>Deseos (30%)</label>
            <input type="number" id="presupuesto-deseo" name="presupuesto-deseo" placeholder="Ej: 12000">
          </div>
          <div>
            <label>Ahorros (20%)</label>
            <input type="number" id="presupuesto-ahorro" name="presupuesto-ahorro" placeholder="Ej: 8000">
          </div>
        </div>
        <button class="btn-primary" type="submit">Guardar presupuesto</button>
      </form>
    </div>

    <div class="card">
      <div class="section-title">Presupuestos personalizados</div>
      <p class="section-subtitle">Base estructural para crear categor√≠as propias, fijas o variables.</p>
      <form id="form-presupuesto-personalizado">
        <div class="row">
          <div>
            <label for="categoria-nombre">Nombre de la categor√≠a</label>
            <input type="text" id="categoria-nombre" name="categoria-nombre" required placeholder="Ej: Transporte, Educaci√≥n">
          </div>
          <div>
            <label for="categoria-tipo">Tipo</label>
            <select id="categoria-tipo" name="categoria-tipo">
              <option value="Fija">Fija</option>
              <option value="Variable">Variable</option>
            </select>
          </div>
          <div>
            <label for="categoria-limite">L√≠mite</label>
            <input type="number" id="categoria-limite" name="categoria-limite" placeholder="Ej: 5000">
          </div>
        </div>
        <button class="btn-primary" type="submit">Crear categor√≠a</button>
      </form>
      <div id="lista-presupuesto-personalizado"></div>
    </div>
  </section>

  <!-- EXPORTAR -->
  <section id="seccion-exportar" class="hidden">
    <div class="card">
      <div class="section-title">Exportar datos</div>
      <p class="section-subtitle">Descarga tus movimientos y reportes en PDF, Excel o JSON.</p>

      <div class="export-grid">
        <div>
          <h4>Exportaci√≥n r√°pida</h4>
          <button class="btn-primary" id="btn-exportar">CSV del mes actual</button>
          <button class="btn-primary" id="btn-exportar-json">JSON del mes actual</button>
        </div>
        <div>
          <h4>PDF</h4>
          <button class="btn-primary" id="btn-exportar-pdf-mes">Movimientos del mes</button>
          <button class="btn-primary" id="btn-exportar-pdf-historial">Historial mensual seleccionado</button>
          <button class="btn-primary" id="btn-exportar-pdf-dashboard">Resumen del dashboard</button>
        </div>
        <div>
          <h4>Excel</h4>
          <button class="btn-primary" id="btn-exportar-xlsx">finanzas_mes.xlsx</button>
          <p class="section-subtitle" style="margin-top:6px;">Incluye fecha, categor√≠a, tipo, nota, monto y totales.</p>
        </div>
      </div>

      <button class="btn-primary" id="btn-exportar">Descargar CSV del mes actual</button>
      <button class="btn-primary" id="btn-exportar-json">Descargar JSON del mes actual</button>
    </div>
  </section>

<script type="module" src="js/main.js"></script>
</main>
</body>
</html>